{% extends 'base_page.html' %}
{% load humanize %}
{% load static %}
{% block page_body %}
<h1 id="YourOrder">Your Order</h1>
    {% if items %}
        <table id="CartTable">
            <tbody class="cartItems">
                {% for item in items %}
                    <tr data-cart-item="{{ item.id }}">
                        <td>{{ item.name }}</td>
                        <td><input required type="number" class="quantity" data-cart-item="{{ item.id }}" name="quantity[{{ item.id }}]" value="{{ item.quantity }}"></td>
                        {% if item.product.loyalty_points_only %}
                            <td class="item-total">{{ item.total_price | intcomma }} LPs</td>
                        {% else %}
                            <td class="item-total">{{ item.total_price | intcomma }} kr.</td>
                        {% endif %}
                        <td><button id="removeItem" onclick="window.location.href='/cart/remove/{{ item.id }}'">X</button></td>
                    </tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr class="summary">
                    <td>Total amount:</td>
                    <td></td>
                    <td class="cart-total">{{ cart_total | intcomma }} kr.</td>
                    <td></td>
                </tr>
            </tfoot>
        </table>
        <div class="checkout-btn-container">
            <span class="loyalty-points">
                {% if cart.total_loyalty_points > 0 %}
                Earn {{ cart.total_loyalty_points | intcomma }} Loyalty Points, if you checkout now!
                {% endif %}
            </span>
            <button id="removeAllItems" onclick="window.location.href='/cart/remove/0'">Empty cart</button>
            <a id="checkOutBTN" class="btn" href="{% url 'checkout' %}">Checkout</a>
        </div>
    {% else %}
        <p id="Empty">Your cart is empty</p>
    {% endif %}
{% endblock %}

